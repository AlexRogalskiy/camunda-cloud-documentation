(window.webpackJsonp=window.webpackJsonp||[]).push([[681],{1618:function(e,a,t){"use strict";t.r(a),a.default=t.p+"assets/images/data-flow-caf97e4ef7211717497cc95be2523dbf.png"},1619:function(e,a,t){"use strict";t.r(a),a.default=t.p+"assets/images/data-flow-job-worker-c0a80b9cd7901b5b915093c40e388fbb.png"},1620:function(e,a,t){"use strict";t.r(a),a.default=t.p+"assets/images/variable-scopes-66c364f3e4cc15613f6b8b737a8fd028.png"},748:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return s})),t.d(a,"metadata",(function(){return c})),t.d(a,"rightToc",(function(){return i})),t.d(a,"default",(function(){return b}));var r=t(3),n=t(7),o=(t(0),t(874)),s={id:"data-flow",title:"Data flow"},c={unversionedId:"reference/bpmn-processes/data-flow",id:"version-1.0/reference/bpmn-processes/data-flow",isDocsHomePage:!1,title:"Data flow",description:"Every BPMN process instance can have one or more variables. Variables are key-value-pairs and hold",source:"@site/versioned_docs/version-1.0/reference/bpmn-processes/data-flow.md",slug:"/reference/bpmn-processes/data-flow",permalink:"/docs/1.0/reference/bpmn-processes/data-flow",editUrl:"https://github.com/camunda-cloud/camunda-cloud-documentation/edit/master/versioned_docs/version-1.0/reference/bpmn-processes/data-flow.md",version:"1.0",sidebar:"version-1.0/Reference",previous:{title:"BPMN coverage",permalink:"/docs/1.0/reference/bpmn-processes/bpmn-coverage"},next:{title:"Overview",permalink:"/docs/1.0/reference/bpmn-processes/tasks"}},i=[{value:"Job workers",id:"job-workers",children:[]},{value:"Variable scopes vs. token-based data",id:"variable-scopes-vs-token-based-data",children:[]},{value:"Concurrency considerations",id:"concurrency-considerations",children:[]},{value:"Additional resources",id:"additional-resources",children:[]}],l={rightToc:i};function b(e){var a=e.components,s=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,s,{components:a,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Every BPMN process instance can have one or more variables. Variables are key-value-pairs and hold\nthe contextual data of the process instance that is required by job workers to do their work or to\ndecide which sequence flows to take. They can be provided when a process instance is created, when\na job is completed, and when a message is correlated."),Object(o.b)("p",null,Object(o.b)("img",{alt:"data-flow",src:t(1618).default})),Object(o.b)("h2",{id:"job-workers"},"Job workers"),Object(o.b)("p",null,"By default, a job worker gets all variables of a process instance. It can limit the data by\nproviding a list of required variables as ",Object(o.b)("em",{parentName:"p"},"fetchVariables"),"."),Object(o.b)("p",null,"The worker uses the variables to do its work. When the work is done, it completes the job. If the\nresult of the work is needed by follow-up tasks, then the worker sets the variables while completing\nthe job. These variables are ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/1.0/product-manuals/concepts/variables#variable-propagation"}),"merged")," into the\nprocess instance."),Object(o.b)("p",null,Object(o.b)("img",{alt:"job-worker",src:t(1619).default})),Object(o.b)("p",null,"If the job worker expects the variables in a different format or under different names then the variables can be transformed by defining ",Object(o.b)("em",{parentName:"p"},"input mappings")," in the process. ",Object(o.b)("em",{parentName:"p"},"Output mappings")," can be used to transform the job variables before merging them into the process instance."),Object(o.b)("h2",{id:"variable-scopes-vs-token-based-data"},"Variable scopes vs. token-based data"),Object(o.b)("p",null,"A process can have concurrent paths, for example, when using a parallel gateway. When the execution reaches the parallel gateway then new tokens are spawned which execute the following paths concurrently."),Object(o.b)("p",null,"Since the variables are part of the process instance and not of the token, they can be read globally from any token. If a token adds a variable or modifies the value of a variable then the changes are also visible to concurrent tokens."),Object(o.b)("p",null,Object(o.b)("img",{alt:"variable-scopes",src:t(1620).default})),Object(o.b)("p",null,"The visibility of variables is defined by the ",Object(o.b)("em",{parentName:"p"},"variable scopes")," of the process."),Object(o.b)("h2",{id:"concurrency-considerations"},"Concurrency considerations"),Object(o.b)("p",null,"When multiple active activities exist in a process instance (i.e. there is a form of concurrent\nexecution, e.g. usage of a parallel gateway, multiple outgoing sequence flows or a parallel\nmulti-instance marker), you may need to take extra care in dealing with variables. When variables\nare altered by one activity, it might also be accessed and altered by another at the same time. Race\nconditions can occur in such processes."),Object(o.b)("p",null,"We recommend taking care when writing variables in a parallel flow. Make sure the variables are\nwritten to the correct ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/1.0/product-manuals/concepts/variables#variable-scopes"}),"variable scope")," using variable\nmappings and make sure to complete jobs and publish messages only with the minimum required\nvariables."),Object(o.b)("p",null,"These type of problems can be avoided by:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"passing only updated variables"),Object(o.b)("li",{parentName:"ul"},"using output variable mappings to customize the variable propagation"),Object(o.b)("li",{parentName:"ul"},"using an embedded subprocess and input variable mappings to limit the visibility and propagation of variables")),Object(o.b)("h2",{id:"additional-resources"},"Additional resources"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/1.0/product-manuals/concepts/job-workers"}),"Job handling")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/1.0/product-manuals/concepts/variables"}),"Variables")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/1.0/product-manuals/concepts/variables#inputoutput-variable-mappings"}),"Input/output variable mappings")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/1.0/product-manuals/concepts/variables#variable-scopes"}),"Variable scopes"))))}b.isMDXComponent=!0},874:function(e,a,t){"use strict";t.d(a,"a",(function(){return p})),t.d(a,"b",(function(){return f}));var r=t(0),n=t.n(r);function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){o(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=n.a.createContext({}),b=function(e){var a=n.a.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):c(c({},a),e)),t},p=function(e){var a=b(e.components);return n.a.createElement(l.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.a.createElement(n.a.Fragment,{},a)}},d=n.a.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),p=b(t),d=r,f=p["".concat(s,".").concat(d)]||p[d]||u[d]||o;return t?n.a.createElement(f,c(c({ref:a},l),{},{components:t})):n.a.createElement(f,c({ref:a},l))}));function f(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,s=new Array(o);s[0]=d;var c={};for(var i in a)hasOwnProperty.call(a,i)&&(c[i]=a[i]);c.originalType=e,c.mdxType="string"==typeof e?e:r,s[1]=c;for(var l=2;l<o;l++)s[l]=t[l];return n.a.createElement.apply(null,s)}return n.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);