(self.webpackChunkcamunda_cloud_documentation=self.webpackChunkcamunda_cloud_documentation||[]).push([[53089],{3905:function(e,t,r){"use strict";r.d(t,{Zo:function(){return u},kt:function(){return d}});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=l(r),d=o,f=m["".concat(c,".").concat(d)]||m[d]||p[d]||a;return r?n.createElement(f,i(i({ref:t},u),{},{components:r})):n.createElement(f,i({ref:t},u))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},73160:function(e,t,r){"use strict";r.r(t),r.d(t,{frontMatter:function(){return i},metadata:function(){return s},toc:function(){return c},default:function(){return u}});var n=r(22122),o=r(19756),a=(r(67294),r(3905)),i={id:"clustering",title:"Clustering"},s={unversionedId:"product-manuals/zeebe/basics/clustering",id:"version-0.25/product-manuals/zeebe/basics/clustering",isDocsHomePage:!1,title:"Clustering",description:"Zeebe can operate as a cluster of brokers, forming a peer-to-peer network.",source:"@site/versioned_docs/version-0.25/product-manuals/zeebe/basics/clustering.md",sourceDirName:"product-manuals/zeebe/basics",slug:"/product-manuals/zeebe/basics/clustering",permalink:"/docs/0.25/product-manuals/zeebe/basics/clustering",editUrl:"https://github.com/camunda-cloud/camunda-cloud-documentation/edit/master/versioned_docs/version-0.25/product-manuals/zeebe/basics/clustering.md",version:"0.25",frontMatter:{id:"clustering",title:"Clustering"},sidebar:"version-0.25/Product Manuals",previous:{title:"Exporters",permalink:"/docs/0.25/product-manuals/zeebe/basics/exporters"},next:{title:"Tutorial",permalink:"/docs/0.25/product-manuals/zeebe/getting-started/index"}},c=[{value:"Gossip Membership Protocol",id:"gossip-membership-protocol",children:[]},{value:"Raft Consensus and Replication Protocol",id:"raft-consensus-and-replication-protocol",children:[]},{value:"Commit",id:"commit",children:[]}],l={toc:c};function u(e){var t=e.components,i=(0,o.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,n.Z)({},l,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Zeebe can operate as a cluster of brokers, forming a peer-to-peer network.\nIn this network, all brokers have the same responsibilities and there is no single point of failure."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"cluster",src:r(91829).Z})),(0,a.kt)("h2",{id:"gossip-membership-protocol"},"Gossip Membership Protocol"),(0,a.kt)("p",null,"Zeebe implements the ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Gossip_protocol"},"Gossip protocol")," to know which brokers are currently part of the cluster."),(0,a.kt)("p",null,"The cluster is bootstrapped using a set of well-known bootstrap brokers, to which the other ones can connect. To achieve this, each broker must have at least one bootstrap broker as its initial contact point in their configuration:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"...\n  cluster:\n    initialContactPoints: [ node1.mycluster.loc:26502 ]\n")),(0,a.kt)("p",null,"When a broker is connected to the cluster for the first time, it fetches the topology from the initial contact points and then starts gossiping with the other brokers. Brokers keep cluster topology locally across restarts."),(0,a.kt)("h2",{id:"raft-consensus-and-replication-protocol"},"Raft Consensus and Replication Protocol"),(0,a.kt)("p",null,"To ensure fault tolerance, Zeebe replicates data across machines using the ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Raft_(computer_science)"},"Raft protocol"),"."),(0,a.kt)("p",null,"Data is divided into partitions (shards). Each partition has a number of replicas. Among the replica set, a ",(0,a.kt)("em",{parentName:"p"},"leader")," is determined by the raft protocol which takes in requests and performs all the processing. All other brokers are passive ",(0,a.kt)("em",{parentName:"p"},"followers"),". When the leader becomes unavailable, the followers transparently select a new leader."),(0,a.kt)("p",null,"Each broker in the cluster may be both leader and follower at the same time for different partitions. This way, client traffic is distributed evenly across all brokers."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"cluster",src:r(98230).Z})),(0,a.kt)("h2",{id:"commit"},"Commit"),(0,a.kt)("p",null,"Before a new record on a partition can be processed, it must be replicated to a quorum (typically majority) of followers. This procedure is called ",(0,a.kt)("em",{parentName:"p"},"commit"),". Committing ensures that a record is durable even in case of complete data loss on an individual broker. The exact semantics of committing are defined by the raft protocol."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"cluster",src:r(31572).Z})))}u.isMDXComponent=!0},91829:function(e,t,r){"use strict";t.Z=r.p+"assets/images/cluster-7f2aec7878e5ccbe062a37e916e596a5.png"},31572:function(e,t,r){"use strict";t.Z=r.p+"assets/images/commit-6ad408af956ff5a2e13674feb7ee5476.png"},98230:function(e,t,r){"use strict";t.Z=r.p+"assets/images/data-distribution-245d7f600a1a13ce2a904cb22039703f.png"}}]);