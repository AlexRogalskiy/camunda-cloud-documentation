(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{125:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return s})),a.d(t,"rightToc",(function(){return o})),a.d(t,"default",(function(){return b}));var n=a(2),r=a(6),i=(a(0),a(243)),l={id:"gateway-health-probes",title:"Gateway Health Indicators and Probes"},s={unversionedId:"product-manuals/zeebe/appendix/gateway-health-probes",id:"product-manuals/zeebe/appendix/gateway-health-probes",isDocsHomePage:!1,title:"Gateway Health Indicators and Probes",description:"The health status for a standalone gateway is available at {zeebe-gateway}:8080/actuator/health",source:"@site/docs/product-manuals/zeebe/appendix/gateway-health-probes.md",slug:"/product-manuals/zeebe/appendix/gateway-health-probes",permalink:"/docs/product-manuals/zeebe/appendix/gateway-health-probes",editUrl:"https://github.com/camunda-cloud/camunda-cloud-documentation/edit/master/docs/product-manuals/zeebe/appendix/gateway-health-probes.md",version:"current",sidebar:"camundaCloud",previous:{title:"Gateway Configuration Template",permalink:"/docs/product-manuals/zeebe/appendix/gateway-config-template"},next:{title:"Environment Variables",permalink:"/docs/product-manuals/zeebe/appendix/environment-variables"}},o=[{value:"Startup Probe",id:"startup-probe",children:[]},{value:"Liveness Probe",id:"liveness-probe",children:[]},{value:"Customizing Health Probes",id:"customizing-health-probes",children:[{value:"Startup Probe",id:"startup-probe-1",children:[]},{value:"Liveness Probe",id:"liveness-probe-1",children:[]},{value:"Gateway Started",id:"gateway-started",children:[]},{value:"Gateway Responsive",id:"gateway-responsive",children:[]},{value:"Gateway Cluster Awareness",id:"gateway-cluster-awareness",children:[]},{value:"Gateway Partition Leader Awareness",id:"gateway-partition-leader-awareness",children:[]},{value:"Disk Space",id:"disk-space",children:[]},{value:"Memory",id:"memory",children:[]}]}],h={rightToc:o};function b(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},h,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"The health status for a standalone gateway is available at ",Object(i.b)("inlineCode",{parentName:"p"},"{zeebe-gateway}:8080/actuator/health")),Object(i.b)("p",null,"The following health indicators are enabled by default"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Gateway Started - checks whether the Gateway is running (i.e. not currently starting and not yet shut down)"),Object(i.b)("li",{parentName:"ul"},"Gateway Responsive - checks whether the Gateway can handle a request within a given timeout"),Object(i.b)("li",{parentName:"ul"},"Gateway Cluster Awareness - checks whether the Gateway is aware of other nodes in the cluster"),Object(i.b)("li",{parentName:"ul"},"Gateway Partition Leader Awareness - checks whether the Gateway is aware of partition leaders in the cluster"),Object(i.b)("li",{parentName:"ul"},"Disk Space - checks that the free disk space is greater than 10 MB"),Object(i.b)("li",{parentName:"ul"},"Memory - checks that at least 10% of max memory (heap) are still available")),Object(i.b)("p",null,"Health indicators are set to sensible defaults. For specific use cases, it might be necessary to customize health probes."),Object(i.b)("h2",{id:"startup-probe"},"Startup Probe"),Object(i.b)("p",null,"The started probe is available at ",Object(i.b)("inlineCode",{parentName:"p"},"{zeebe-gateway}:8080/actuator/health/startup")),Object(i.b)("p",null,"In the default configuration this is merely an alias for the ",Object(i.b)("em",{parentName:"p"},"Gateway Started")," health indicator. Other configurations are possible (see below)"),Object(i.b)("h2",{id:"liveness-probe"},"Liveness Probe"),Object(i.b)("p",null,"The liveness probe is available at ",Object(i.b)("inlineCode",{parentName:"p"},"{zeebe-gateway}:8080/actuator/health/liveness")),Object(i.b)("p",null,"It is based on the health indicators mentioned above."),Object(i.b)("p",null,"In the default configuration, the liveness probe is comprised of the following health indiactors:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Gateway Started - checks whether the Gateway is running (i.e. not currently starting and not yet shut down)"),Object(i.b)("li",{parentName:"ul"},"Liveness Gateway Responsive - checks whether the Gateway can handle a request within an ample timeout, but will only report a ",Object(i.b)("em",{parentName:"li"},"DOWN")," health status after the underlying health indicator is down for more than 10 minutes"),Object(i.b)("li",{parentName:"ul"},"Liveness Gateway Cluster Awareness - based on Gateway cluster awareness, but will only report a ",Object(i.b)("em",{parentName:"li"},"DOWN")," health status after the underlying health indicator is down for more than 5 minutes"),Object(i.b)("li",{parentName:"ul"},"Liveness Gateway Partition Leader Awareness - based on Gateway partition leader awareness, but will only report a ",Object(i.b)("em",{parentName:"li"},"DOWN")," health status after the underlying health indicator is down for more than 5 minutes"),Object(i.b)("li",{parentName:"ul"},"Liveness Disk Space - checks that the free disk space is greater than 1 MB"),Object(i.b)("li",{parentName:"ul"},"Liveness Memory - checks that at least 1% of max memory (heap) are still available")),Object(i.b)("p",null,"Note that health indicators with the ",Object(i.b)("em",{parentName:"p"},"liveness")," prefix are intended to be customized for the liveness probe. This allows defining tighter thresholds (e.g. for free memory 1% for liveness vs. 10% for health), as well as adding tolerance for short downtimes (e.g. gateway has no awareness of other nodes in the cluster for more than 5 minutes)."),Object(i.b)("h2",{id:"customizing-health-probes"},"Customizing Health Probes"),Object(i.b)("p",null,"Global settings for all health indicators:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.defaults.enabled=true")," - enables (default) or disables all health indicators"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.endpoint.health.show-details=always/never")," - toggles whether a summary or details (default) of the health indicators will be returned")),Object(i.b)("h3",{id:"startup-probe-1"},"Startup Probe"),Object(i.b)("p",null,"Settings for started probe:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.endpoint.health.group.startup.show-details=never")," - toggles whether a summary (default) or details of the startup probe will be returned"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.endpoint.health.group.startup.include=gatewayStarted")," - defines which health indicators are included in the startup probe")),Object(i.b)("h3",{id:"liveness-probe-1"},"Liveness Probe"),Object(i.b)("p",null,"Settings for liveness probe:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.endpoint.health.group.liveness.show-details=never")," - toggles whether a summary (default) or details of the liveness probe will be returned"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.endpoint.health.group.liveness.include=gatewayStarted,livenessGatewayResponsive,livenessGatewayClusterAwareness,livenessGatewayPartitionLeaderAwareness,livenessDiskSpace,livenessMemory")," - defines which health indicators are included in the liveness probe")),Object(i.b)("p",null,"Note that the individual contributing health indicators of the liveness probe can be configured as well (see below)."),Object(i.b)("h3",{id:"gateway-started"},"Gateway Started"),Object(i.b)("p",null,"Settings for gateway started health indicator:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.gateway-started.enabled=true")," - enables (default) or disables this health indicator")),Object(i.b)("h3",{id:"gateway-responsive"},"Gateway Responsive"),Object(i.b)("p",null,"Settings for gateway responsiveness health indicator:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.gateway-responsive.enabled=true")," - enables (default) or disables this health indicator"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.gateway-responsive.requestTimeout=500ms")," - defines the timeout for the request; if the test completes before the timeout, the health status is ",Object(i.b)("em",{parentName:"li"},"UP"),", otherwise it is ",Object(i.b)("em",{parentName:"li"},"DOWN")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.liveness.gateway-responsive.requestTimeout=5s")," - defines the timeout for the request for liveness probe; if the request completes before the timeout, the health status is ",Object(i.b)("em",{parentName:"li"},"UP")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.liveness.gateway-responsive.maxdowntime=10m")," - - defines the maximum downtime before the liveness health indicator for responsiveness will flip")),Object(i.b)("h3",{id:"gateway-cluster-awareness"},"Gateway Cluster Awareness"),Object(i.b)("p",null,"Settings for gateway cluster awareness health indicator:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.gateway-clusterawareness.enabled=true")," - enables (default) or disables this health indicator (and its liveness counterpart)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.liveness.gateway-clusterawareness.maxdowntime=5m")," - defines the maximum downtime before the liveness health indicator for cluster awareness will flip. In other words: this health indicator will report ",Object(i.b)("em",{parentName:"li"},"DOWN")," after the gateway was unaware of other members in the cluster for more than 5 minutes")),Object(i.b)("h3",{id:"gateway-partition-leader-awareness"},"Gateway Partition Leader Awareness"),Object(i.b)("p",null,"Settings for gateway partition leader awareness health indicator:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.gateway-partitionleaderawareness.enabled=true")," - enables (default) or disables this health indicator (and its liveness counterpart)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.liveness.gateway-partitionleaderawareness.maxdowntime=5m")," - defines the maximum downtime before the liveness health indicator for partition leader awareness will flip. In other words: this health indicator will report ",Object(i.b)("em",{parentName:"li"},"DOWN")," after the gateway was unaware of partition leaders for more than 5 minutes")),Object(i.b)("h3",{id:"disk-space"},"Disk Space"),Object(i.b)("p",null,"This is arguably the least critical health indicator given that the standalone gateway does not write to disk. The only exception may be the writing of log files, which depend on the log configuration."),Object(i.b)("p",null,"Settings for disk space health indicator:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.diskspace.enabled=true")," - enables (default) or disables this health indicator (and its liveness counterpart)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.diskspace.threshold=10MB")," - defines the threshold for the required free disk space"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.diskspace.path=.")," - defines the path for which the free disk space is examined"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.liveness.diskspace.threshold=1MB")," - defines the threshold for the required free disk space for liveness"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.liveness.diskspace.path=.")," - defines the path for which the free disk space for liveness is examined")),Object(i.b)("h3",{id:"memory"},"Memory"),Object(i.b)("p",null,"This health indicator examines free memory (heap)."),Object(i.b)("p",null,"Settings for memory health indicator:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.memory.enabled=true")," - enables (default) or disables this health indicator (and its liveness counterpart)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.memory.threshold=0.1")," - defines the threshold for the required free memory. The default is 0.1 which is interpreted as 10% of max memory"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"management.health.liveness.memory.threshold=0.01")," - defines the threshold for the required free memory for liveness. The default is 0.01 which is interpreted as 10 of max memory")))}b.isMDXComponent=!0},243:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return p}));var n=a(0),r=a.n(n);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var h=r.a.createContext({}),b=function(e){var t=r.a.useContext(h),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=b(e.components);return r.a.createElement(h.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,h=o(e,["components","mdxType","originalType","parentName"]),c=b(a),u=n,p=c["".concat(l,".").concat(u)]||c[u]||d[u]||i;return a?r.a.createElement(p,s(s({ref:t},h),{},{components:a})):r.a.createElement(p,s({ref:t},h))}));function p(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,l=new Array(i);l[0]=u;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:n,l[1]=s;for(var h=2;h<i;h++)l[h]=a[h];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);